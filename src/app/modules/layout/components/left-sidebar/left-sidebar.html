<!-- Sidebar principal -->
<div
  class="z-[9900] fixed top-0 left-0 h-full bg-white/90 backdrop-blur-md 
         shadow-xl border-r border-gray-200 flex flex-col transition-transform duration-500
         w-full sm:w-64 md:w-72
         overflow-y-auto" [class.-translate-x-60]="!isOpen">
  <!-- Header con logo y botón -->
  <div class="flex items-center justify-between p-4 border-b border-gray-300">
    <div class="flex items-center space-x-2">
      <a href="/">
        <img
          src="logo_puzzle_makers_2.png"
          alt="Logo"
          class="w-5/6 "
        />
      </a>
      
      <!-- <h1 class="text-lg sm:text-xl font-semibold text-gray-800">PUZZLE MAKERS</h1> -->
    </div>

    <button (click)="toggleSidebar()" class="p-2 rounded-md hover:bg-gray-200">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
           stroke-width="1.5" stroke="currentColor" class="w-6 h-6 sm:w-7 sm:h-7 text-gray-700">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M3.75 5.25h16.5m-16.5 6h16.5m-16.5 6h16.5"/>
      </svg>
    </button>
  </div>

  <!-- Contenido principal -->
  <div class="flex-1 p-4 sm:p-5">
    <h2 class="text-gray-700 text-base sm:text-lg mb-3 font-medium">
      Hola, ¿qué deseas hacer hoy?
    </h2>

    <div class="bg-white p-3 sm:p-4 border-2 border-gray-200 rounded-lg shadow-sm">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-lg sm:text-xl font-bold text-gray-800 flex items-center gap-2">
          <svg class="w-5 h-5 sm:w-6 sm:h-6 text-blue-600" fill="none" stroke="currentColor"
               viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
          </svg>
          Filtros del Mapa
        </h3>
        <button (click)="toggleAll()"
                class="text-xs sm:text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors">
          {{ allActive() ? 'Ocultar todos' : 'Mostrar todos' }}
        </button>
      </div>

      <div class="space-y-2">
        @for(filter of filterOptions; track filter.type) {
          <button (click)="toggleFilter(filter.type)"
                  [class]="getFilterButtonClass(filter)"
                  class="w-full flex items-center justify-between p-3 rounded-xl transition-all duration-200 hover:shadow-md">
            <div class="flex items-center gap-3">
              <div [style.background-color]="filter.color"
                   class="w-8 h-8 sm:w-9 sm:h-9 rounded-full flex items-center justify-center text-white shadow-sm">
                {{ filter.emoji }}
              </div>
              <span class="font-medium text-sm sm:text-base">{{ filter.label }}</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="text-xs sm:text-sm text-gray-500">{{ getCount(filter.type) }}</span>
              <div [class]="filter.active ? 'bg-green-500' : 'bg-gray-300'"
                   class="w-5 h-5 sm:w-6 sm:h-6 rounded-full flex items-center justify-center transition-colors">
                @if(filter.active) {
                  <svg class="w-3 h-3 sm:w-4 sm:h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                          d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                          clip-rule="evenodd"></path>
                  </svg>
                }
              </div>
            </div>
          </button>
        }
      </div>

      <div class="mt-4 pt-3 border-t border-gray-200">
        <div class="flex items-center justify-between text-sm sm:text-base">
          <span class="text-gray-600">Total visible:</span>
          <span class="font-bold text-blue-600">{{ getTotalVisible() }} lugares</span>
        </div>
      </div>
    </div>
  </div>
</div>
  <!-- Botón flotante para abrir sidebar -->
  @if(!isOpen){
    <button (click)="toggleSidebar()"
            class="z-[9999] fixed top-5 left-5 p-3 sm:p-4 bg-white/90 backdrop-blur-md
                   rounded-full shadow-lg border border-gray-300 hover:scale-110
                   transition-transform duration-300">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
           stroke-width="1.5" stroke="currentColor" class="w-6 h-6 sm:w-7 sm:h-7 text-gray-700">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="M3.75 5.25h16.5m-16.5 6h16.5m-16.5 6h16.5"/>
      </svg>
    </button>
  }
